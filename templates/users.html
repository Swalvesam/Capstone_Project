{% extends 'base.html' %}

{% block title %}{{current_user.first_name}}'s Dashboard{% endblock %}
{% block head %}


<!-- bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
crossorigin="anonymous"></script>
<!-- connects css -->
<link rel="stylesheet" href="/static/css/site.css">

{% endblock%}
{% block body%}

<selection class="container">
    <h1>{% if current_user.is_authenticated %}
        Welcome, {{current_user.first_name}}    
        {% endif %}
    </h1>
</selection>

<section class="h-100 mx-3 full-columns">
    <div class="row h-100">
        <aside id="home_search" class="col-4 h-100 bg-light d-flex justify-content-center">
            <div class="container my-4">
                <b>Search for a Home</b>
                <form action=/home_search method="GET">
                <label>Maximum Home Price</label> <input type="number" id="max_price" name="max_price" min="0" max="100,000,000"> <br>
                <label>Address:</label>
                <input type="text" placeholder="street address, city, state zip"name="street_address"><br>
                <label>City</label> <input type="text" name="city">
                <label>State:</label> <input type="text" placeholder="2 digit state code"  name="state"><br>
                </datalist> <br>
                <label>Bedrooms</label> 
                    <select name="bedrooms">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                <label>Bathrooms</label>
                    <select name="bathrooms">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select> <br>
                <button type="submit" name="home_results">Show Results</button>
                </form>
            </div>   
        </aside>
    

        <main id="list_saved_homes" class="col h-100 overflow-y">
            <div class="container py-4 content">
                <h2>{% if current_user.is_authenticated %}
                    {{current_user.first_name}}'s saved homes   
                    {% endif %}
                </h2>
                
                <ul>
                    <form action="/remove_saved_home" method="POST" id="remove_saved_home">
                    {% for home in saved_homes %}
                    <li>{{home.address}}</li>
                    <input type="hidden" name="home_property_id" value="{{home.rm_property_id}}">
                    <input type="hidden" name="saved_home_id" value="{{home.saved_home_id}}">

                    <button type="submit" name="remove_saved_home" value="{{home.rm_property_id}}"class="btn"><i class="bi bi-trash"></i></button>

                    <button onclick="location.href='/view_home_info/{{home.saved_home_id}}'" type="button"><i class="bi bi-house-door"></i> Info</button>
                    {% endfor %}
                </form>
                </form>
                </ul>


                <h2> {% if current_user.is_authenticated %}
                    {{current_user.first_name}}'s saved businesses   
                    {% endif %}
                </h2>
                <ul>
                    <form action="/remove_saved_business" method="POST" id="remove_saved_business">
                    {%for business in saved_businesses %}
                    <li>{{business.bus_name}}</li>
                    <button type="submit" name="remove_saved_business" value={{business.yelp_id}} class="btn"><i class="bi bi-trash"></i></button>
                    <a href="{{business.yelp_url}}"><img class="yelpBurst" src="/static/icons/yelp.png"width="75" height="75"></img></a>
                    </form>
                    {% endfor %}
                </ul>
            </div>    
        </main>
    </div>    

    <div class="footer">
        <form action=/logout>
            Ready to logout? 
            <button type="submit" name="logout">See ya later</button>
        </form>

    </div>
</section>    
<!-- <div id="user_info"> User info: {{current_user.email}} </div> -->



{% endblock %}

